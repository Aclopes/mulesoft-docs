= Lookup Tables

Anypoint Manager enables you to create and edit _lookup tables_ in order to facilitate transaction processing.

== Creating a Lookup Table

Lookup tables are created through calls to the link:/anypoint-partner-manager-api[Anypoint Partner Manager API].
This section shows the steps necessary to create a three-column, two-key table using link:https://curl.haxx.se/[curl].

=== To Create a Lookup Table

. Create the table:
+
----
curl -X POST -d
'{
  "name": "ProductCodes"
 }' "https://anypoint.mulesoft.com/lb2b/tpm/api/lookupTables?environmentId=yourEnvironmentId&apiKey=yourAPIKey"

----
+
The API returns a table ID, which you use in subsequent calls.

. Add a field:
+
----

curl -X POST -d
'{
  "name": "InternalProductCode"
}' "http://anypoint.mulesoft.com/b2b/tpm/api/lookupTables/yourTableId/fields?environmentId=yourEnvironmentId&apiKey=yourAPIKey"
----
+
The API returns an ID for the field.

. Use the same syntax to add two more fields:
+
----
curl -X POST -d
'{
  "name": "PartnerName"
}' "http://anypoint.mulesoft.com/b2b/tpm/api/lookupTables/yourTableId/fields?environmentId=yourEnvironmentId&apiKey=yourAPIKey"
----
+
----
curl -X POST -d
'{
  "name": "PartnerProductCode"
}' "http://anypoint.mulesoft.com/b2b/tpm/api/lookupTables/yourTableId/fields?environmentId=yourEnvironmentId&apiKey=yourAPIKey"
----
+
The API returns IDs for each field.

. Add keys (inbound and outbound)
+
*Inbound*
+
The Inbound key is the unique combination of the first and second fields.
+
-----
curl -X POST -H
 '{
  "name": "InboundProductCodes",
  "fieldIds": [
      "fieldId1",
      "fieldId2
        ]
 }' "http://anypoint.mulesoft.com/b2b/tpm/api/lookupTables/yourTableId/keys?environmentId=yourEnvironmentId&apiKey=yourAPIKey"
-----
+
*Outbound*
+
The Inbound key is the unique combination of the second and third fields.
+
-----
curl -X POST -H
 '{
  "name": "InboundProductCodes",
  "fieldIds": [
      "fieldId2",
      "fieldId3
        ]
 }' "http://anypoint.mulesoft.com/b2b/tpm/api/lookupTables/yourTableId/keys?environmentId=yourEnvironmentId&apiKey=yourAPIKey"
-----
. Use Anypoint Partner Manager to populate the table (see <<Add a Row to a Table>>).
. Query the API to incorporate table data (see link:/mule-user-guide/v/3.8/consuming-a-rest-api[Consuming a REST API].


include::/_sources/edit-home-partner-settings.adoc[]

[start=3]

. In the *Partners* section of the left-hand navigation pane on the <<configure-trading-partners.adoc#img-company-information, Company information page>>, click *Lookup Tables*.
+
The <<img-lookup-tables>> appears.

[[img-lookup-tables]]

image::lookup-tables.png[img-lookup-tables, title="Lookup Tables Page"]


== Working with an Existing Lookup Table

. On the <<img-lookup-tables>>, in the *Lookup Tables* dropdown listbox, click the down arrow.
+
The *Lookup Tables* dropdown list appears, populated with any lookup tables that have been created in the link:/access-management/environments[environment] in which you are working.
+
To work with a table, click to select it from the dropdown list.
The <<img-lookup-tables-detail>> appears. The first row on this page is the Filter Row. Use this row to filter specific columns for a specific string. You can filter multiple columns; for example, if you type *a* in the first column and *b* in the second, the page displays all rows that include both an *a* in the first column and a *b* in the second.
+
To edit existing rows in the table, see <<Edit Existing Rows in a Table>>.
+
To add a row to the table, see <<Add a Row to a Table>>.


[[img-lookup-tables-detail]]

image::lookup-tables-detail.png[img-lookup-tables-detail-search-row, title="Lookup Tables Detail Page"]

=== Edit Existing Rows in a Table

. On <<img-lookup-tables-detail>>, click the Edit/Save icon (identified in <<img-lookup-tables-detail>>) that corresponds to the row you want to edit.
. Edit cells in the row as appropriate.
. Click the Edit/Save icon to save the row.


=== Add a Row to a Table

. On the <<img-lookup-tables-detail>>, click *Add Row*.
+
A new row appears under the Search Row.

[[img-lookup-tables-detail-add-row]]

image::lookup-tables-detail-add-row.png[img-lookup-tables-detail-add-row, title="Lookup Tables Detail Page (row added)"]

[start=2]

. Enter values for the new row in the appropriate cells.
. When you have entered all values, click the Save icon at the right end of the new row (identified in <<img-lookup-tables-detail>>) to save it.
+
To cancel the new row without saving, click the Cancel icon (identified in <<img-lookup-tables-detail>>).


.


.
