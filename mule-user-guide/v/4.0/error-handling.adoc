= Error Handling Reference
:keywords: error handling, exceptions, exception catching, exceptions

Mule provides a series of scopes for handling errors.

When an activity in your Mule flow fails, Mule raises an error which you can handle inside an error handler scope. +
The Error Handler can enclose On Error scopes that you can implement to handle errors in your flow.

All Mule applications have a default Error Handler to handle errors not defined in other on Error scopes.

From a high level perspective, errors that occur in Mule fall into one of two categories: system errors, and messaging errors.

== System Errors

Mule throws a system error when an exception occurs at the system level. +
If no Mule Event is involved, the errors are handled by a system error handler.

A system error handler handles exceptions that occur:

* During application start-up.
* When a connection to an external system fails.

When a system error occurs, Mule sends an error notification to registered listeners, logs the error, and if the error was caused by a connection failure, executes a reconnection strategy.

System error handlers are not configurable in Mule.

// REVIEW: Not sure if neccesary.
// === Example Scenario
//
// Mule establishes a connection to a JMS broker in order to receive a message. When Mule attempts to use the connection to consume a message the connection fails, which causes Mule to invoke the system exception strategy. Because the failure occurred before any message was received for processing, Mule invoked the _system_, rather than _messaging_, exception strategy.

== Messaging Errors

Mule throws a messaging error whenever an exception is thrown within a flow. +
These errors are handled by the error handler scope.

When a Mule Event being processed through a Mule flow raises an error, normal flow execution stops and the process is transferred to the message processor sequence within the error handler scope. +
Inside the error handler scope you can incorporate various on errors scopes designed to match error types and expressions.  Within each on error scope that you configure,  you can incorporate any number of event processors to handle the error precisely as you wish.

The diagram below illustrates what happens when an event processor raises an error.

image::error-handling-39be7.png[error-handling-39be7.png]

Mule supports three types of On Error Scopes. Each scope defines a different behavior for when an error occurs:

[%header%autowidth.spread]
|===
|On Error Scope |Description

| Default On Error Scope
| Defined and implicitly applied by default to handle all messaging errors that are not handled by any other on-error scopes.

| On Error Continue
| If an error occurs within the Try scope, any other components in the scope are skipped, and execution continues immediately after the scope ends. +
If a transaction is being handled, it’s committed.

| On Error Propagate
| If an error occurs within the Try scope, the execution of the entire flow breaks. If the failing Try scope is nested within another Try scope, execution is continued outside the parent scope. +
If a transaction is being handled, it’s rolled back.

| On Error Retry
| If an error occurs within the Try scope, the entire scope is attempted again. +
There can only be one On Error Retry scope in each Error Handler.

|===

Each flow can contain only one error handler, however this error handler can contain as many on error scopes as you see necessary. Except for On Error Retry scope. Only one of these is allowed per Error Handler block.

== Other Ways of Handling Errors

== Reconnection Strategies

Reconnection strategy behavior resembles that of error handling strategies, but reconnection strategies provide instructions specifically for reconnection attempts.

// // QQ: Check if Until successful is still available in Mule4
// === Until Successful Scope
//
// This scope attempts to route a message through its child flow until the message is processed successfully. +
// You can define the maximum number of processing attempts the Until Successful scope undertakes before it reverts to handling the message as though it were an exception.


// No Exception Filer nor CXF error handling here:
// === Exception Filter
//
// Exception filter stops normal flow execution when it discovers a message that contains a message in the `exceptionPayload` field. By comparison, an exception strategy typically stops normal flow execution when a message throws an exception in the flow. You can combine the two and configure the exception filter to stop normal flow execution _and_ throw an exception, which triggers the exception strategy. Refer to the link:/mule-user-guide/v/4.0/filters[Filters documentation] for configuration details.


// === CXF Error Handling
//
// Web services that utilize CXF can implement Mule exception strategies (such as the Catch and Rollback exception strategies) that are compatible with CXF. Consult the link:/mule-user-guide/v/4.0/cxf-error-handling[CXF Error Handling documentation] for details.

== See Also

* link:/mule-user-guide/v/4.0/try-scope-concept[About Try Scope]
* link:/mule-user-guide/v/4.0/reconnection-strategy-about[About Reconnection Strategies]
