= To Filter Data Using an Input Parameter

In this procedure, you query the database for product information filtering the data by product code. The database connector supports using a query parameter or a URI parameter to filter the data. To avoid SQL injections, use the colon syntax for defining a input parameter described in this procedure. Do _not_ use expressions to define an input parameter. This procedure builds on the example that connects a Mule app to a database using the Classic Models sample database. 

. Create a new project. In the new flow, add an HTTP Listener connector.
. Accept or change the listener configuration. For example, accept the default configuration, which is host name = 0.0.0.0 and port = 8081.
+
. In General, set Path to the path of the HTTP URL. For example, set Path to `/`.
. In Allowed Methods, type POST.
. Accept the other default listener settings and close the connector.
. Assuming you have connected a database to the flow for a Select operation, set up the query:
* In Database - Select, in General, enter SQL query text, omitting the semicolon. In the WHERE clause, use a colon followed by the key to represent the query input parameter for example:
+
`SELECT * FROM products p WHERE p.productCode = :pcode`
+
* In Input Parameter, click Add, and type pcode for the key.
* In Value, delete the quotation marks, and pause for hints.
* Select `attributes`. Type period and select `queryParams`.
* Type `pcode`:
+
`attributes.queryParams.pcode`
+
image:filter-query.png[SELECT * FROM products p WHERE p.productCode = :pcode pcode attributes.queryParams.pcode]
. Close the connector, click Run or Sync, and select Running > Copy Link.
. In a client such as Postman, paste the link, select the POST method, and add the query parameter to the URL.
+ 
`http://...cloudhub.io/?pcode=S10_1678/`
+
. After sending the URL in Postman, open the database connector and select Live > Output.
+
The results of the filtered query appear in JSON format:
+
----
[
  {
    "buyPrice": 48.81,
    "productScale": "1:10" "S"
    "productCode": "S10_1678"
    ...
  }
]
----

== See Also

* link:/connectors/http-trigger-app-from-browser[To Trigger an App from a Browser]
* link:/connectors/db-connect-database[To Connect a Database]
* link:http://www.mysqltutorial.org/download/2[Classic Models database download]