= To Insert Data in Bulk

This procedure shows how to post multiple data objects and insert them into a database using a single SQL statement. First, you create JSON objects to represent the data. Next, you configure the the bulk insert SQL operation of the database connector. In the SQL statement, you write the names of the JSON keys as parameters using the colon syntax `:mykey`. You add a transform component between the HTTP listener and the database connector that converts the JSON to a Java linked list. You send an HTTP POST request to feed the data objects to the Mule app and the data is inserted into the database. This procedure builds on the example that connects a Mule app to a database using the MySQL Classic Models sample database. 

. Create a new project and in the new flow, add an HTTP Listener connector.
. In Path, enter */bulkinsert* and in Allowed Methods, enter *POST,GET*. Accept other default settings.
. Add a Transform component to the flow. In Source, enter the following DataWeave code:
+
----
%dw 1.0
%output application/java  

---
[
  {
    "pline": "Electric Cars",
    "tdesc": "Speedy but silent driving."
  }, 
  {
    "pline": "Self-Driving Cars",
    "tdesc": "Text in safety."
  }
]
----
+
. Add a Database connector, and select the Bulk Insert operation.
. Configure the database as follows:
+
* In Type, select MySQL Connection.
* In Host, enter the URL of a database on the internet.
* In Port, enter the port that the database listens on. For example, enter *3306*.
* In User and Password, enter the database user name and password.
* In Database, enter *classicmodels*.
. Configure the database driver, selecting or uploading a JDBC driver. Test and save the configuration.
. In SQL Query Text, enter the following query:
+
----
INSERT INTO productlines(productLine, textDescription) VALUES (:pline, :tdesc)
----
+
. Sync and copy the CloudHub link for your app. In an HTTP client, such as Postman, set up the following request:
+
* Select POST.
* Paste the CloudHub link in the address text box.
* Select Body > Raw and select JSON (application/json).
* Paste the following JSON code in the Body:
----
[{
	"pline": "Electric Cars",
	"tdesc": "Speedy but silent driving."
}, {
	"pline": "Self-Driving Cars",
	"tdesc": "Text in safety."
}]
----
. Click Send.
+
Status 200 appears in the client and querying the database shows the new product line rows.

== See Also

* link:/connectors/db-connect-database[To Connect a Database]
* link:http://www.mysqltutorial.org/download/2[Classic Models database download]